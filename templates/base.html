<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<title>{% block title %}Top One{% endblock %}</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
	{% load static %}
	<link rel="icon" href="{% static 'logo_whitebg.png' %}" type="image/x-icon">
	<link rel="shortcut icon" href="{% static 'logo_whitebg.png' %}" type="image/x-icon">

	<style>
		:root {
			--brand-navy: #1F2937;
			--brand-red:  #C62828;
			--brand-navy-weak: #233041;
		}
		body { overflow-y: scroll; }
		body::-webkit-scrollbar { width: 8px; }
		body::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,.3); border-radius: 4px; }

		.sidebar {
			position: fixed;
			inset: 0 auto 0 0;
			width: 140px;
			background-color: var(--brand-navy);
			color: #fff;
			display: grid;
			grid-template-rows: 110px 1fr 64px;
			padding: 0 12px;
		}
		.brand {
			display: flex;
			align-items: center;
			justify-content: center;
			border-bottom: 1px solid rgba(255,255,255,.08);
			margin-bottom: 6px;
			padding-top: 10px;
		}
		.brand img {
			width: 100px;
			height: auto;
			display: block;
			border: 10px solid white;
			background-color: white;
		}
		.nav {
			grid-row: 2;
			padding-top: 6px;
			gap: 2px;
		}
		.nav .nav-item { margin: 2px 0; }
		.nav-link {
			display: block;
			width: 100%;
			text-align: left;
			color: #fff !important;
			text-decoration: none;
			padding: 8px 10px;
			border-radius: 8px;
			font-size: 13px;
			transition: background-color .15s ease, color .15s ease, transform .05s ease;
		}
		.nav-link:hover {
			background: var(--brand-navy-weak);
			color: #fff !important;
			transform: translateX(1px);
		}
		.nav-link.active {
			background: rgba(198, 40, 40, .16);
			color: #fff !important;
			border-left: 3px solid var(--brand-red);
			padding-left: 7px;
		}
		.title {
			display: block;
			width: 100%;
			text-align: left;
			font-weight: 600;
			opacity: .9;
			padding: 8px 10px;
			margin-top: 4px;
		}
		.logout {
			grid-row: 3;
			align-self: end;
			margin-bottom: 12px;
		}
		.logout .nav-link { opacity: .9; }
		.logout .nav-link:hover { opacity: 1; background: var(--brand-navy-weak); }

		.content {
			margin-left: 140px;
			padding: 24px 24px 24px 28px;
			min-height: 100vh;
			background: #fff;
		}

		@media (max-width: 992px) {
			.sidebar { width: 112px; }
			.brand img { width: 72px; }
			.content { margin-left: 112px; }
		}
	</style>
</head>
<body>
	<div class="container-fluid p-0">
		<div class="row g-0">
			<div class="col-auto sidebar">
				<div class="brand">
					<img src="{% static 'images/logo_rectangle.png' %}" alt="Top One">
				</div>

				<ul class="nav flex-column">
					<span class="title">Dashboard</span>

					{# 简单的 active 高亮：按你路由需要可改成 url name 判断 #}
					<li class="nav-item"><a class="nav-link {% if request.path == '/home/' %}active{% endif %}" href="/home">主页</a></li>
					<li class="nav-item"><a class="nav-link {% if request.path == '/products/' %}active{% endif %}" href="/products">产品</a></li>
					<li class="nav-item"><a class="nav-link {% if request.path == '/stocks/' %}active{% endif %}" href="/stocks">库存</a></li>
					<li class="nav-item"><a class="nav-link {% if request.path == '/inbounds/' %}active{% endif %}" href="/inbounds">入库</a></li>
					<li class="nav-item"><a class="nav-link {% if request.path == '/orders/' %}active{% endif %}" href="/orders">订单</a></li>
					{% if request.user.username != "guest" %}
					<li class="nav-item"><a class="nav-link {% if request.path == '/account/profile/' %}active{% endif %}" href="{% url 'accounts:profile' %}">个人设置</a></li>
					{% endif %}
				</ul>

				<div class="logout">
					<form method="post" action="{% url 'accounts:logout' %}">
						{% csrf_token %}
						<button class="nav-link btn btn-link p-0 w-100 text-start" type="submit">
							<i class="bi bi-box-arrow-right me-1"></i> 退出登录
						</button>
					</form>
				</div>
			</div>

			<div class="col content">
				{% block content %}{% endblock %}
			</div>
		</div>
	</div>
</body>
</html>
